<!DOCTYPE html>

<html lang="en">

    <head>
    	<meta charset="UTF-8">

    	{% load staticfiles %}
        <link rel='stylesheet' type='text/css' href="{% static 'css/bootstrap.min.css' %}" />
        <!--
        <link rel='stylesheet' type='text/css' href="{% static 'css/bootstrap.css' %}" />
        <link rel='stylesheet' type='text/css' href="{% static 'css/dashboard.css' %}" />
        -->
        <style>

            * {
                font-size:14px;
                font-family:'Verdana', Arial, Sans-Serif;
                box-sizing: border-box;
                margin-left:5px;
            }
            body{
                background-color:#f9f9f9;
            }
            input {
                white-space: normal;
                width: 90px;
            }
            tr, td {
                padding: 1px;
            td {
                padding: 0px;
                text-align:left;
            }

        </style>

        <title>B2Note service demo</title>

    </head>

    <body>

        <!--
        # http://oliverspindler.com/articles/2012/06/06/abominable-iframe/
        # <iframe src="iframed_src" onload="this.style.height = (this.contentWindow.document.body.scrollHeight) + 'px';" scroll="auto"></iframe>
        -->

        <!-- http://stackoverflow.com/questions/12102464/how-do-i-make-iframes-load-only-on-a-button-click -->
        <iframe id="b2note_iframe" name="b2note_iframe" src="interface_main" width={{iframe_on}} style="float:right; border:none" onload="this.style.height = (this.contentWindow.document.body.scrollHeight) + 'px';" scroll="auto"></iframe>

        <script>
            // http://stackoverflow.com/questions/1735230/can-i-add-custom-attribute-to-html-tag
            document.getElementById("b2note_iframe").subject_tofeed = "{{ subject_tofeed }}"
        </script>

        <br>

        <h1 style="text-align:center">B2Note service prototype</h1>

        <h3>Some explaining:</h3>

        <p>
            This page emulates the<b>outcome of a search</b> performed by a user of EUDAT services such as B2Share.
            <br>
            Thus, it displays a list of hyperlinks pointing to<b>files stored by EUDAT</b>.
        </p>
        <p>
            Next to each hyperlink stands a "Create Annotation" button.
            <br>
            Clicking one of these buttons<b>triggers the B2Note interface</b>.
        </p>
        <p>
            The B2note interface allows the user to<b>select semantic concepts</b> for describing the corresponding file.
            <br>
            The semantic relations created in the process are<b>stored</b> by the B2Note service, allowing later retrieval and processing.
        </p>

        <h3>The list of files:</h3>

        {% for file_info in buttons_info %}

        <form action="interface_main" method="post" target="b2note_iframe">
            {% csrf_token %}
            <table>
                <tr>
                    <td>
                        <input type="hidden" name="subject_tofeed" value={{ file_info.file_url }} class="field left" readonly="readonly"/>
                        <a href={{ file_info.file_url }}>{{ file_info.link_label }}</a>
                        <input type="hidden" name="pid_tofeed" value={{ file_info.file_pid }} class="field left" readonly="readonly"/>
                    </td>
                    <td rowspan="2">
                        <input type="submit" id={{ file_info.button_n }} value="Create Annotation" title="Click to annotate hyperlink using B2Note."/>
                    </td>
                </tr>
                <tr>
                    <td>
                        http://hdl.handle.net/11304/31c0d886-b988-11e3-8cd7-14feb57d12b9
                    </td>
                </tr>
            </table>
        </form>

        <br>

        {% endfor %}

        <h3>Some complementary explaining:</h3>

        <p>
            The necessary information was collected by hand for a small subset of files.
            <br>
            However, it is expected that the information can easily be gathered in an automated way by the actual file-hosting service.
        </p>
        <p>
            This information includes:
            <ul>
                <li>The pid of the file (required).</li>
                <li>The hyperlink address (optional).</li>
                <li>A human-readable label for the hyperlink (optional).</li>
            </ul>
        </p>

    </body>

</html>