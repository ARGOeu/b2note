{% extends "b2note_app/__base.html" %}

{% block content %}

    <h3>Search</h3>

    <form action="/search" method="post">

        {% csrf_token %}

        {% for f in form %}

            {% if f.logicals %}

                {% for op in f.logicals %}

                    <select name="logical{{forloop.counter0}}" onchange="this.form.submit()">

                        <option value="{{op}}">{{ op }}</option>

                    </select>

                {% endfor %}

            {% endif %}

            {% if f.types %}

                <select name="select{{forloop.counter0}}" onchange="this.form.submit()">

                    {% for op in f.types %}

                        {% if op == f.type %}

                            <option value="{{op}}" selected>{{ op }}</option>

                        {% else %}

                            <option value="{{op}}">{{ op }}</option>

                        {% endif %}

                    {% endfor %}

                </select>

                {% if f.type %}

                    {% if f.type == "Semantic tag" %}

                        <input type="text" class="form-control" name="q" id="id_q{{forloop.counter0}}" value="{{ query }}" placeholder="Type-in to select a tag"  autocomplete="off" spellcheck="false" dir="auto" autofocus/>

                        <br>
                        <input type="checkbox" id="cbox{{forloop.counter0}}" value="syn">Include synonym matches

                    {% elif f.type == "Free-text keyword" %}

                        <input type="text" name="keyword{{forloop.counter0}}" id="keyword{{forloop.counter0}}" placeholder="Type-in a free-text keyword"/>

                    {% elif f.type == "Comment" %}

                        <p>Return all files with comment annotations (combines with the other search parameters).</p>

                    {% endif %}

                {% endif %}

            {% endif %}

        {% endfor %}

        <br>
        <input type="submit" name="plus" value="+"/>

        <br>
        <button type="submit" class="btn btn-default" name="launch_search" title="Search for files">
            <span class="glyphicon glyphicon-search"></span>
        </button>

    </form>

    <br>
    <br>
    <br>

{% endblock %}